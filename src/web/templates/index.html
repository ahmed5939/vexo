<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vexo Music Bot</title>
    <meta name="description" content="Smart Discord Music Bot Analytics Dashboard">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/dashboard.css">
</head>

<body>
    <!-- Top Navigation Bar -->
    <header class="topbar">
        <div class="topbar-left">
            <div class="logo">
                <div class="logo-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 18V5l12-2v13"></path>
                        <circle cx="6" cy="18" r="3"></circle>
                        <circle cx="18" cy="16" r="3"></circle>
                    </svg>
                </div>
                <span class="logo-text">Vexo</span>
            </div>
        </div>

        <nav class="topbar-nav" id="server-nav">
            <button class="nav-pill active" onclick="switchScope('global')">
                <span class="nav-pill-dot"></span>
                Global
            </button>
            <!-- Server pills populated by JS -->
        </nav>

        <div class="topbar-right">
            <div class="search-global">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                    <circle cx="11" cy="11" r="8" />
                    <path d="m21 21-4.3-4.3" />
                </svg>
                <input type="text" id="global-search" placeholder="Search songs, users, servers..." autocomplete="off">
                <kbd>‚åòK</kbd>
            </div>

            <div class="topbar-actions">
                <button class="action-btn" id="theme-toggle" title="Toggle theme">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                        <circle cx="12" cy="12" r="5" />
                        <path
                            d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4" />
                    </svg>
                </button>
                <div class="notification-wrapper">
                    <button class="action-btn" id="notif-btn" onclick="toggleNotifications()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20"
                            height="20">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" />
                            <path d="M13.73 21a2 2 0 0 1-3.46 0" />
                        </svg>
                        <span class="notif-badge" id="notif-dot" style="display: none;"></span>
                    </button>
                    <div class="notif-dropdown" id="notif-dropdown">
                        <div class="notif-header">
                            <span>Notifications</span>
                            <button class="notif-clear">Clear all</button>
                        </div>
                        <div class="notif-list" id="notif-list">
                            <div class="notif-empty">No new notifications</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="layout">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <a href="#" class="sidebar-link active" data-tab="dashboard">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                        <rect x="3" y="3" width="7" height="7" rx="1" />
                        <rect x="14" y="3" width="7" height="7" rx="1" />
                        <rect x="14" y="14" width="7" height="7" rx="1" />
                        <rect x="3" y="14" width="7" height="7" rx="1" />
                    </svg>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="sidebar-link" data-tab="library">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                        <path
                            d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                    </svg>
                    <span>Library</span>
                </a>
                <a href="#" class="sidebar-link" data-tab="songs">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                        <circle cx="12" cy="12" r="10" />
                        <polyline points="12 6 12 12 16 14" />
                    </svg>
                    <span>History</span>
                </a>
                <a href="#" class="sidebar-link" data-tab="users">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                        <circle cx="9" cy="7" r="4" />
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                        <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                    </svg>
                    <span>Users</span>
                </a>
                <a href="#" class="sidebar-link" data-tab="servers">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                        <rect x="2" y="2" width="20" height="8" rx="2" ry="2" />
                        <rect x="2" y="14" width="20" height="8" rx="2" ry="2" />
                        <line x1="6" y1="6" x2="6.01" y2="6" />
                        <line x1="6" y1="18" x2="6.01" y2="18" />
                    </svg>
                    <span>Servers</span>
                </a>

                <div class="sidebar-divider"></div>

                <a href="#" class="sidebar-link" data-tab="logs">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                        <polyline points="14 2 14 8 20 8" />
                        <line x1="16" y1="13" x2="8" y2="13" />
                        <line x1="16" y1="17" x2="8" y2="17" />
                        <polyline points="10 9 9 9 8 9" />
                    </svg>
                    <span>Logs</span>
                </a>
                <a href="#" class="sidebar-link" data-tab="settings">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                        <circle cx="12" cy="12" r="3" />
                        <path
                            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
                    </svg>
                    <span>Settings</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="bot-status">
                    <div class="status-indicator online"></div>
                    <div class="status-info">
                        <span class="status-label" id="status-text">Connected</span>
                        <span class="status-latency" id="stat-latency">--ms</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- DASHBOARD TAB -->
            <div id="tab-dashboard" class="tab-panel active">
                <!-- Bento Grid Layout -->
                <div class="bento-grid">
                    <!-- Now Playing - Large Featured Card -->
                    <div class="bento-card bento-featured" id="now-playing">
                        <div class="np-idle">
                            <div class="np-idle-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="48"
                                    height="48">
                                    <circle cx="12" cy="12" r="10" />
                                    <polygon points="10 8 16 12 10 16 10 8" fill="currentColor" stroke="none" />
                                </svg>
                            </div>
                            <span class="np-idle-text">Nothing playing</span>
                            <span class="np-idle-hint">Use /play in Discord to start</span>
                        </div>
                    </div>

                    <!-- Quick Stats Row -->
                    <div class="bento-card bento-stat">
                        <div class="stat-icon stat-icon-purple">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24"
                                height="24">
                                <rect x="2" y="2" width="20" height="8" rx="2" ry="2" />
                                <rect x="2" y="14" width="20" height="8" rx="2" ry="2" />
                                <line x1="6" y1="6" x2="6.01" y2="6" />
                                <line x1="6" y1="18" x2="6.01" y2="18" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="stat-guilds">0</span>
                            <span class="stat-label">Servers</span>
                        </div>
                    </div>

                    <div class="bento-card bento-stat">
                        <div class="stat-icon stat-icon-green">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24"
                                height="24">
                                <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z" />
                                <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
                                <line x1="12" y1="19" x2="12" y2="23" />
                                <line x1="8" y1="23" x2="16" y2="23" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="stat-voice">0</span>
                            <span class="stat-label">Active Sessions</span>
                        </div>
                    </div>

                    <div class="bento-card bento-stat">
                        <div class="stat-icon stat-icon-blue">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24"
                                height="24">
                                <path d="M9 18V5l12-2v13" />
                                <circle cx="6" cy="18" r="3" />
                                <circle cx="18" cy="16" r="3" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="stat-songs">0</span>
                            <span class="stat-label">Songs</span>
                        </div>
                    </div>

                    <div class="bento-card bento-stat">
                        <div class="stat-icon stat-icon-orange">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24"
                                height="24">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                                <circle cx="9" cy="7" r="4" />
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                                <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="stat-users">0</span>
                            <span class="stat-label">Users</span>
                        </div>
                    </div>

                    <!-- Top Songs Card -->
                    <div class="bento-card bento-list">
                        <div class="bento-header">
                            <h3 class="bento-title">
                                <span class="title-icon">üî•</span>
                                Top Songs
                            </h3>
                            <button class="bento-action" onclick="switchTab('songs')">View all</button>
                        </div>
                        <div class="song-list" id="top-songs-table">
                            <div class="list-empty">Loading...</div>
                        </div>
                    </div>

                    <!-- Top Users Card -->
                    <div class="bento-card bento-users">
                        <div class="bento-header">
                            <h3 class="bento-title">
                                <span class="title-icon">üë•</span>
                                Top Users
                            </h3>
                            <button class="bento-action" onclick="switchTab('users')">View all</button>
                        </div>
                        <div class="user-list" id="top-users-list">
                            <div class="list-empty">Loading...</div>
                        </div>
                    </div>

                    <!-- System Stats -->
                    <div class="bento-card bento-system">
                        <div class="bento-header">
                            <h3 class="bento-title">
                                <span class="title-icon">‚ö°</span>
                                System
                            </h3>
                        </div>
                        <div class="system-stats">
                            <div class="system-stat">
                                <div class="system-stat-bar">
                                    <div class="system-stat-fill cpu-fill" id="cpu-bar" style="width: 0%"></div>
                                </div>
                                <div class="system-stat-info">
                                    <span class="system-stat-label">CPU</span>
                                    <span class="system-stat-value"><span id="stat-cpu">0</span>%</span>
                                </div>
                            </div>
                            <div class="system-stat">
                                <div class="system-stat-bar">
                                    <div class="system-stat-fill ram-fill" id="ram-bar" style="width: 0%"></div>
                                </div>
                                <div class="system-stat-info">
                                    <span class="system-stat-label">Memory</span>
                                    <span class="system-stat-value"><span id="stat-ram">0</span>%</span>
                                </div>
                            </div>
                            <div class="system-stat">
                                <div class="system-stat-info">
                                    <span class="system-stat-label">Latency</span>
                                    <span class="system-stat-value" id="stat-latency-val">0ms</span>
                                </div>
                            </div>
                            <div class="system-stat">
                                <div class="system-stat-info">
                                    <span class="system-stat-label">Total Plays</span>
                                    <span class="system-stat-value" id="stat-plays">0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Insights Cards -->
                    <div class="bento-card bento-insight">
                        <div class="insight-icon">‚ù§Ô∏è</div>
                        <div class="insight-content">
                            <span class="insight-label">Most Liked Genre</span>
                            <span class="insight-value" id="insight-liked-genre">‚Äî</span>
                        </div>
                    </div>

                    <div class="bento-card bento-insight">
                        <div class="insight-icon">üé§</div>
                        <div class="insight-content">
                            <span class="insight-label">Favorite Artist</span>
                            <span class="insight-value" id="insight-liked-artist">‚Äî</span>
                        </div>
                    </div>

                    <div class="bento-card bento-insight">
                        <div class="insight-icon">üéµ</div>
                        <div class="insight-content">
                            <span class="insight-label">Top Song</span>
                            <span class="insight-value" id="insight-liked-song">‚Äî</span>
                        </div>
                    </div>

                    <!-- Helpful Users -->
                    <div class="bento-card bento-helpful">
                        <div class="bento-header">
                            <h3 class="bento-title">
                                <span class="title-icon">üèÜ</span>
                                Helpful Users
                            </h3>
                        </div>
                        <div class="helpful-list" id="useful-users-list">
                            <div class="list-empty">Loading...</div>
                        </div>
                    </div>
                    <!-- Charts Row -->
                    <div class="bento-card bento-chart">
                        <h3 class="bento-title">Genre Distribution</h3>
                        <div class="chart-container">
                            <canvas id="genreChart"></canvas>
                        </div>
                    </div>

                    <div class="bento-card bento-chart">
                        <h3 class="bento-title">Discovery Sources</h3>
                        <div class="chart-container">
                            <canvas id="discoveryChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

    <!-- LIBRARY TAB -->
    <div id="tab-library" class="tab-panel">
        <div class="panel-header">
            <h1 class="panel-title">Song Library</h1>
            <p class="panel-subtitle">All songs in your collection</p>
        </div>
        <div class="panel-toolbar">
            <div class="search-box">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                    <circle cx="11" cy="11" r="8" />
                    <path d="m21 21-4.3-4.3" />
                </svg>
                <input type="text" id="library-search" placeholder="Search library..." class="search-input">
            </div>
            <div class="filter-group">
                <select id="library-filter-genre" class="filter-select">
                    <option value="">All Genres</option>
                </select>
            </div>
        </div>
        <div class="data-table-wrap">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Artist</th>
                        <th>Genre</th>
                        <th>Source</th>
                        <th>Added By</th>
                        <th>Added</th>
                    </tr>
                </thead>
                <tbody id="library-list">
                    <tr>
                        <td colspan="6" class="table-empty">Loading...</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- HISTORY TAB -->
    <div id="tab-songs" class="tab-panel">
        <div class="panel-header">
            <h1 class="panel-title">Playback History</h1>
            <p class="panel-subtitle">Recent song plays</p>
        </div>
        <div class="panel-toolbar">
            <div class="search-box">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                    <circle cx="11" cy="11" r="8" />
                    <path d="m21 21-4.3-4.3" />
                </svg>
                <input type="text" id="history-search" placeholder="Search history..." class="search-input">
            </div>
        </div>
        <div class="data-table-wrap">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Artist</th>
                        <th>Duration</th>
                        <th>Genre</th>
                        <th>Requested By</th>
                        <th>Reactions</th>
                        <th>Played</th>
                    </tr>
                </thead>
                <tbody id="songs-list">
                    <tr>
                        <td colspan="7" class="table-empty">Loading...</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- USERS TAB -->
    <div id="tab-users" class="tab-panel">
        <div class="panel-header">
            <h1 class="panel-title">Users</h1>
            <p class="panel-subtitle">All users who have interacted with the bot</p>
        </div>
        <div class="panel-toolbar">
            <div class="search-box">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                    <circle cx="11" cy="11" r="8" />
                    <path d="m21 21-4.3-4.3" />
                </svg>
                <input type="text" id="users-search" placeholder="Search users..." class="search-input">
            </div>
        </div>
        <div class="users-grid" id="users-directory">
            <div class="list-empty">Loading...</div>
        </div>
    </div>

    <!-- SERVERS TAB -->
    <div id="tab-servers" class="tab-panel">
        <div class="panel-header">
            <h1 class="panel-title">Servers</h1>
            <p class="panel-subtitle">Active Discord servers</p>
        </div>
        <div class="panel-toolbar">
            <div class="search-box">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                    <circle cx="11" cy="11" r="8" />
                    <path d="m21 21-4.3-4.3" />
                </svg>
                <input type="text" id="servers-search" placeholder="Search servers..." class="search-input">
            </div>
        </div>
        <div class="servers-grid" id="guild-list">
            <div class="list-empty">Loading...</div>
        </div>
    </div>

    <!-- LOGS TAB -->
    <div id="tab-logs" class="tab-panel">
        <div class="logs-container">
            <!-- Level Filter Pills -->
            <div class="logs-level-bar">
                <button class="logs-pill active" data-level="all">
                    <span class="logs-pill-count" id="log-count-all">0</span>
                    <span class="logs-pill-label">All</span>
                </button>
                <button class="logs-pill" data-level="DEBUG">
                    <span class="logs-pill-dot dot-debug"></span>
                    <span class="logs-pill-count" id="log-count-debug">0</span>
                    <span class="logs-pill-label">Debug</span>
                </button>
                <button class="logs-pill" data-level="INFO">
                    <span class="logs-pill-dot dot-info"></span>
                    <span class="logs-pill-count" id="log-count-info">0</span>
                    <span class="logs-pill-label">Info</span>
                </button>
                <button class="logs-pill" data-level="WARNING">
                    <span class="logs-pill-dot dot-warning"></span>
                    <span class="logs-pill-count" id="log-count-warning">0</span>
                    <span class="logs-pill-label">Warn</span>
                </button>
                <button class="logs-pill" data-level="ERROR">
                    <span class="logs-pill-dot dot-error"></span>
                    <span class="logs-pill-count" id="log-count-error">0</span>
                    <span class="logs-pill-label">Error</span>
                </button>
            </div>

            <!-- Toolbar -->
            <div class="logs-toolbar">
                <div class="logs-search-wrap">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                        <circle cx="11" cy="11" r="8" />
                        <path d="m21 21-4.3-4.3" />
                    </svg>
                    <input type="text" id="log-search" class="logs-search-input" placeholder="Filter logs...">
                </div>
                <div class="logs-toolbar-filters">
                    <select id="log-filter-category" class="logs-select">
                        <option value="">All Categories</option>
                    </select>
                    <select id="log-filter-source" class="logs-select">
                        <option value="">All Sources</option>
                    </select>
                    <select id="log-filter-guild" class="logs-select">
                        <option value="">All Guilds</option>
                    </select>
                </div>
                <div class="logs-toolbar-actions">
                    <button class="logs-btn" id="log-toggle-scroll" title="Toggle auto-scroll">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14"
                            height="14">
                            <path d="M12 5v14M19 12l-7 7-7-7" />
                        </svg>
                        Auto-scroll
                    </button>
                    <button class="logs-btn" id="log-clear" title="Clear all logs">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14"
                            height="14">
                            <path d="M3 6h18M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" />
                        </svg>
                        Clear
                    </button>
                </div>
            </div>

            <!-- Log Viewport -->
            <div class="logs-viewport" id="logs-viewport">
                <div class="logs-empty" id="logs-empty">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="40"
                        height="40">
                        <path d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span>Waiting for log events...</span>
                </div>
            </div>

            <!-- Status Bar -->
            <div class="logs-statusbar">
                <div class="logs-statusbar-left">
                    <span class="logs-ws-indicator" id="logs-ws-indicator">
                        <span class="logs-ws-dot"></span> Connected
                    </span>
                    <span class="logs-status-sep">|</span>
                    <span><span id="logs-shown-count">0</span> shown</span>
                </div>
                <div class="logs-statusbar-right">
                    <span id="logs-scroll-label">Auto-scroll ON</span>
                </div>
            </div>
        </div>
    </div>

    <!-- SETTINGS TAB -->
    <div id="tab-settings" class="tab-panel">
        <div class="panel-header">
            <h1 class="panel-title" id="settings-title">Settings</h1>
            <p class="panel-subtitle">Configure your bot preferences</p>
        </div>

        <div class="settings-grid">
            <!-- Global Settings -->
            <div class="settings-card" id="settings-global" style="display: none;">
                <h3 class="settings-section-title">Global Settings</h3>
                <div class="setting-item">
                    <div class="setting-info">
                        <span class="setting-label">Max Concurrent Servers</span>
                        <span class="setting-description">Limit the number of servers the bot can join</span>
                    </div>
                    <input type="number" id="setting-max-servers-tab" class="setting-input" placeholder="Unlimited">
                </div>
                <button class="btn-primary" onclick="saveSettingsTab()">Save Settings</button>
            </div>

            <!-- Server Settings -->
            <div class="settings-card" id="settings-server" style="display: none;">
                <h3 class="settings-section-title">Server Settings</h3>
                <div class="setting-item">
                    <div class="setting-info">
                        <span class="setting-label">Pre-Buffering</span>
                        <span class="setting-description">Pre-load the next song for gapless playback</span>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" id="setting-pre-buffer">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <div class="setting-info">
                        <span class="setting-label">Buffer Amount</span>
                        <span class="setting-description">Songs to keep ready: <strong id="buffer-val">1</strong></span>
                    </div>
                    <input type="range" id="setting-buffer-amount" min="1" max="10" value="1" class="range-input"
                        oninput="document.getElementById('buffer-val').textContent = this.value">
                </div>
                <div class="setting-item">
                    <div class="setting-info">
                        <span class="setting-label">Max Song Duration</span>
                        <span class="setting-description">Skip songs longer than this (minutes)</span>
                    </div>
                    <input type="number" id="setting-max-duration" class="setting-input" placeholder="6" min="1"
                        max="60">
                </div>
                <button class="btn-primary" onclick="saveServerSettings()">Save Settings</button>
            </div>
        </div>
    </div>
    </main>
    </div>

    <!-- User Detail Modal -->
    <div class="modal-overlay" id="user-detail-modal">
        <div class="user-detail-panel">
            <button class="user-detail-close" onclick="closeUserDetail()">&times;</button>
            <div class="user-detail-loading" id="user-detail-loading">
                <div class="spinner"></div>
                <span>Loading user data...</span>
            </div>
            <div class="user-detail-content" id="user-detail-content" style="display: none;">
                <!-- Header -->
                <div class="user-detail-header">
                    <div class="user-detail-avatar" id="ud-avatar"></div>
                    <div class="user-detail-identity">
                        <h2 class="user-detail-name" id="ud-name"></h2>
                        <span class="user-detail-id" id="ud-id"></span>
                        <div class="user-detail-badges" id="ud-badges"></div>
                    </div>
                </div>

                <!-- Stats Row -->
                <div class="user-detail-stats">
                    <div class="ud-stat">
                        <span class="ud-stat-value" id="ud-plays">0</span>
                        <span class="ud-stat-label">Plays</span>
                    </div>
                    <div class="ud-stat">
                        <span class="ud-stat-value" id="ud-reactions">0</span>
                        <span class="ud-stat-label">Reactions</span>
                    </div>
                    <div class="ud-stat">
                        <span class="ud-stat-value" id="ud-playlists">0</span>
                        <span class="ud-stat-label">Playlists</span>
                    </div>
                </div>

                <!-- Timestamps -->
                <div class="user-detail-meta" id="ud-meta"></div>

                <!-- Preferences -->
                <div class="user-detail-section" id="ud-prefs-section" style="display: none;">
                    <h3 class="ud-section-title">Preferences</h3>
                    <div class="ud-prefs-grid" id="ud-prefs"></div>
                </div>

                <!-- Recent Songs -->
                <div class="user-detail-section" id="ud-songs-section" style="display: none;">
                    <h3 class="ud-section-title">Recent Songs</h3>
                    <div class="ud-songs-list" id="ud-songs"></div>
                </div>

                <!-- Liked Songs -->
                <div class="user-detail-section" id="ud-liked-section" style="display: none;">
                    <h3 class="ud-section-title">Liked Songs</h3>
                    <div class="ud-songs-list" id="ud-liked"></div>
                </div>

                <!-- Imported Playlists -->
                <div class="user-detail-section" id="ud-playlists-section" style="display: none;">
                    <h3 class="ud-section-title">Imported Playlists</h3>
                    <div class="ud-playlists-list" id="ud-imported-playlists"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Command Palette Modal -->
    <div class="modal-overlay" id="search-modal">
        <div class="command-palette">
            <div class="cp-header">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                    <circle cx="11" cy="11" r="8" />
                    <path d="m21 21-4.3-4.3" />
                </svg>
                <input type="text" id="cp-input" placeholder="Search anything..." autofocus>
                <kbd>ESC</kbd>
            </div>
            <div class="cp-results" id="cp-results">
                <div class="cp-section">
                    <div class="cp-section-title">Quick Actions</div>
                    <div class="cp-item" data-action="dashboard"><span class="cp-icon">üìä</span> Go to Dashboard</div>
                    <div class="cp-item" data-action="library"><span class="cp-icon">üìö</span> Open Library</div>
                    <div class="cp-item" data-action="logs"><span class="cp-icon">üìú</span> View Logs</div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/static/dashboard.js"></script>
</body>

</html>